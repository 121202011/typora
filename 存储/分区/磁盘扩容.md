### 新增硬盘配置全流程

#### 1. 查看现有磁盘挂载的适配器

当系统未自动识别新增硬盘时，先确认已有磁盘的挂载信息：

```bash
ls -l /sys/block/sda
```

- 示例输出中若显示挂载到 `host32`，则记录该适配器编号

#### 2. 重新扫描适配器以识别新硬盘

针对上一步找到的适配器（如 `host32`），触发扫描以检测新增硬盘：

```bash
echo '- - -' > /sys/class/scsi_host/host32/scan
```

- 说明：`- - -` 分别代表扫描所有通道、目标和 LUN，强制刷新设备列表

#### 3. 确认新增磁盘信息

查看系统中所有磁盘（包括新增未分区的磁盘，通常为 `sdb` 或更高编号）：

```bash
fdisk -l
```

- 重点关注新增磁盘的设备名（如 `/dev/sdb`）及容量信息

#### 4. 查看现有分区文件系统属性（可选）

确认已有分区的格式和 UUID，便于后续操作参考：

```bash
blkid
```

#### 5. 对新增磁盘进行分区

以 `/dev/sdb` 为例，将其全容量划分为一个分区：

```bash
fdisk /dev/sdb
```

分区操作步骤：

1. 输入 `n` 新建分区
2. 选择分区类型（默认主分区 `p`）
3. 分区编号（默认 `1`）
4. 起始扇区（直接回车，使用默认值）
5. 结束扇区（直接回车，使用全部剩余空间）
6. 输入 `w` 保存分区设置

#### 6. 创建物理卷（PV）

将新分区初始化为 LVM 物理卷：

```bash
pvcreate /dev/sdb1
```

#### 7. 查看卷组（VG）信息

确认目标卷组名称（如示例中的 `ubuntu-vg`）：

```bash
vgdisplay
```

#### 8. 将物理卷加入卷组

扩展卷组容量，纳入新创建的物理卷：

```bash
vgextend ubuntu-vg /dev/sdb1
```

#### 9. 扩展逻辑卷（LV）并同步文件系统

将卷组中的空闲空间全部分配给目标逻辑卷（以 `/dev/mapper/ubuntu--vg-ubuntu` 为例）：

```bash
lvresize -l +100%FREE -r /dev/mapper/ubuntu--vg-ubuntu
```

- 参数说明：
  - `-l +100%FREE`：分配卷组中所有空闲空间
  - `-r`：自动同步扩展文件系统（无需手动执行 `resize2fs` 或 `xfs_growfs`）

操作完成后，可通过 `df -h` 验证磁盘空间是否已成功扩展。